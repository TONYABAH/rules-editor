!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("ace-builds/src-noconflict/ace.js"),require("ace-builds/src-noconflict/theme-cobalt.js"),require("ace-builds/src-noconflict/theme-merbivore_soft.js"),require("ace-builds/src-noconflict/theme-monokai.js"),require("ace-builds/src-noconflict/theme-tomorrow_night_blue.js"),require("ace-builds/src-noconflict/theme-twilight.js"),require("ace-builds/src-noconflict/theme-solarized_light.js"),require("ace-builds/src-noconflict/theme-ambiance.js"),require("ace-builds/src-noconflict/theme-chrome.js"),require("ace-builds/src-noconflict/theme-textmate.js"),require("ace-builds/webpack-resolver"),require("rules-engine")):"function"==typeof define&&define.amd?define(["ace-builds/src-noconflict/ace.js","ace-builds/src-noconflict/theme-cobalt.js","ace-builds/src-noconflict/theme-merbivore_soft.js","ace-builds/src-noconflict/theme-monokai.js","ace-builds/src-noconflict/theme-tomorrow_night_blue.js","ace-builds/src-noconflict/theme-twilight.js","ace-builds/src-noconflict/theme-solarized_light.js","ace-builds/src-noconflict/theme-ambiance.js","ace-builds/src-noconflict/theme-chrome.js","ace-builds/src-noconflict/theme-textmate.js","ace-builds/webpack-resolver","rules-engine"],t):(e||self).RulesEditor=t(e.ace,0,0,0,0,0,0,0,0,0,0,e.RulesEngine)}(this,function(e,t,n,r,o,i,s,a,u,c,l,g){function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=/*#__PURE__*/f(e);function h(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,m(e,t)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}d.default.config.set("basePath","ace-builds/src-noconflict/");var k=d.default.require("ace/mode/text_highlight_rules").TextHighlightRules,p=d.default.require("ace/mode/text").Mode,b=d.default.require("ace/mode/folding/fold_mode").FoldMode,x=d.default.require("ace/token_iterator").TokenIterator,w={light:["Solarized Light","Ambience","Chrome","Textmate"],dark:["Cobalt","Merbivore Soft","Monokai","Tomorrow night blue","Twilight"]};g.Rules.init(["fr","de"]);var v=/*#__PURE__*/function(e){function t(t){var n;return(n=e.call(this)||this).keywords={},n.rules=new g.Rules(t,"ace/mode/kbf"),n.setLanguage(t),n}h(t,e);var n=t.prototype;return n.getRules=function(){var e=this;return{start:[{token:"comment",regex:/\/\/.*$/},{token:"comment",regex:/\/\*/,next:"comment"},{token:"string",regex:/'(?:.|\\(:?u[\da-fA-F]+|x[\da-fA-F]+|[tbrf'"n]))?'/},{token:"string",regex:"`",next:"string"},{token:"string",regex:"'",next:"qstring"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:/[+-]?\d+(?:(?:\.\d*)?(?:[eE][+-]?\d+)?)?\b/},{token:"punctuation.operator",regex:/\?|\:|\,|\;|\./},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:/\s+/},{token:"keyword.operator",regex:/[-+%=<>*]|[~:,.&!^]/},{token:"keyword.operator",regex:"abs sign ceil floor trunc frac acos asin atan cos sin tan cosh sinh tanh exp log log10 sqrt pi".split(" ").join("|")},{token:function(t){var n=e.keywordEntries.find(function(e){return e[1].toLowerCase()===t.toLowerCase()});if(!n)return"text";switch(n[0]){case"TRUE":case"FALSE":case"YES":case"NO":return"constant.language.boolean";case"OR":case"AND":case"IF":case"ELSE":case"ELSEIF":case"THEN":return"keyword.control";case"DIGIT":case"TEXT":case"MENU":case"NUMBER":return"constant.language";default:return"keyword.other"}},regex:new RegExp(/\b\w+\b/)},{caseInsensitive:!0}],qstring:[{token:"constant.language.escape",regex:/''/},{token:"string",regex:"'",next:"start"},{defaultToken:"string"}],string:[{token:"constant.language.escape",regex:/``/},{token:"string",regex:"`",next:"start"},{defaultToken:"string"}],comment:[{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]}},n.setLanguage=function(e){if(this.keywords=this.rules.getKeywords(),!this.keywords)throw new Error("Language not supported yet: "+e||"");this.keywordEntries=Object.entries(this.keywords),this.$rules=this.getRules(),this.normalizeRules()},t}(k),y=e.Range,S=x,M={en:{foldingStartMarker:/\b^\s*(?:rule|prompt|summary)\b/i,foldingStopMarker:/\b^\s*(?:prompt|rule|max|min|text|digit|yes\/no)\b/gi,foldingStopMenu:/\b^\s*(?:max|min|text|digit|yes\/no)\b/gi},fr:{foldingStartMarker:/\b^\s*(?:rule|prompt|summary)\b/i,foldingStopMarker:/\b^\s*(?:prompt|rule|max|min|text|digit|yes\/no)\b/gi,foldingStopMenu:/\b^\s*(?:max|min|text|digit|yes\/no)\b/gi}},T=/*#__PURE__*/function(e){function t(){var t;return(t=e.call(this)||this).foldingStartMarker=M.en.foldingStartMarker,t.foldingStopMarker=M.en.foldingStopMarker,t.foldingStopMenu=M.en.foldingStopMenu,t.getFoldWidgetRange=function(e,n,r){var o=e.language,i=e.getLine(r);if(t.foldingStartMarker=M[o].foldingStartMarker,t.foldingStopMarker=M[o].foldingStopMarker,t.foldingStopMenu=M[o].foldingStopMenu,i.match(t.foldingStartMarker))for(var s={row:r,column:i.length},a=new S(e,s.row,s.column),u=a.getCurrentToken(),c=t.foldingStopMarker;u;){if(u.value.match(c)){var l=a.getCurrentTokenRow();return y.fromPoints(s,{row:u.value.match(t.foldingStopMenu)?l:l-1,column:a.getCurrentTokenColumn()})}u=a.stepForward()}return null},t}return h(t,e),t}(b);function j(e,t,n){var r;return function(){var o=this,i=arguments,s=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(o,i)},t),s&&e.apply(o,i)}}var E=/*#__PURE__*/function(e){function t(t,n){var r;return void 0===n&&(n=!0),(r=e.call(this)||this).lineCommentStart="//",r.blockComment={start:"/*",end:"*/"},r.editor=t,r.language=t.session.language,r.$highlightRules=new v(r.language),r.$id="ace/mode/kbf",r.rules=new g.Rules(r.editor.session.language||"en",r.$id),n&&r.watch(),r}return h(t,e),t.prototype.watch=function(){var e=this;this.foldingRules=new T,this.editor.on("change",j(function(){try{var t=e.editor.getValue(),n=function(n,r){try{var o=Promise.resolve(e.rules.parse(t)).then(function(t){e.editor.session.clearAnnotations(),e.editor.session.setAnnotations(t)})}catch(e){return r(e)}return o&&o.then?o.then(void 0,r):o}(0,function(e){console.log(e)});return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},1e3))},t}(p),R=new(/*#__PURE__*/function(e){function t(){var t;return(t=e.call(this)||this).$rules={start:[{token:"comment",regex:/\/\/.*$/},{token:"comment",regex:/\/\*/,next:"comment"},{token:"string",regex:"`",next:"string"},{token:"string",regex:"'",next:"qstring"},{token:"constant.numeric",regex:/0[xX][0-9a-fA-F]+\b/},{token:"constant.numeric",regex:/[+-]?\d+(?:(?:\.\d*)?(?:[eE][+-]?\d+)?)?\b/},{token:"keyword.operator",regex:/\W[-+%=<>*]\W|\*\*|[~:,.&$]|->*?|=>/},{token:"paren.lparen",regex:/[\[(\{]/},{token:"paren.rparen",regex:/[\])\}]/},{token:"keyword",regex:/[^=]+(?:[=:])/},{token:"punctuation.operator",regex:/\?[:,;=\.]/},{caseInsensitive:!0}],qstring:[{token:"constant.language.escape",regex:/''/},{token:"string",regex:"'",next:"start"},{defaultToken:"string"}],string:[{token:"constant.language.escape",regex:/``/},{token:"string",regex:"`",next:"start"},{defaultToken:"string"}],comment:[{token:"comment",regex:/\*\//,next:"start"},{defaultToken:"comment"}]},t}return h(t,e),t}(k)),q=e.Range,L=x,C=/*#__PURE__*/function(e){function t(){var t;return(t=e.call(this)||this).foldingStartMarker=/^\s*\/\/[^-]+$/,t.foldingStopMarker=/^\s*--/,t.getFoldWidgetRange=function(e,n,r){var o=e.getLine(r);if(o.match(t.foldingStartMarker))for(var i={row:r,column:o.length},s=new L(e,i.row,i.column),a=s.getCurrentToken(),u=t.foldingStopMarker;a;){if(a.value.match(u)){var c=s.getCurrentTokenRow();return q.fromPoints(i,{row:c,column:s.getCurrentTokenColumn()})}a=s.stepForward()}return null},t}return h(t,e),t}(b),N=/*#__PURE__*/function(e){function t(t,n){var r;return void 0===n&&(n=!1),(r=e.call(this)||this).$highlightRules=r.HighlightRules=R,r.foldingRules=new C,r.editor=t,r.language=t.session.language,r.$id="ace/mode/res",r.rules=new g.Rules(r.editor.session.language||"en",r.$id),n||r.watch(),r}return h(t,e),t.prototype.watch=function(){var e=this;this.editor.on("change",j(function(){try{var t=e.editor.getValue(),n=function(n,r){try{var o=Promise.resolve(e.rules.parse(t)).then(function(t){e.editor.session.clearAnnotations(),e.editor.session.setAnnotations(t)})}catch(e){return r(e)}return o&&o.then?o.then(void 0,r):o}(0,function(e){console.log(e)});return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},1e3))},t}(p);return new(/*#__PURE__*/function(){function t(){return t.instance||(t.instance=this),this.language="en",this.editors=[],this.editor=null,this.defaults={fontSize:18,fontName:"Courier New",theme:"ace/theme/tomorrow_night_blue"},this.theme=this.defaults.theme,this.fontSize=this.defaults.fontSize,this.fontName=this.defaults.fontName,t.instance}var n,r=t.prototype;return r.setHighlightRule=function(e,t){var n=t?t.substring(t.indexOf(".")):".kbf",r=null;if(".kbf"===n)r=new E(e);else if(".res"===n)r=new N(e);else{var o=function(e){var t=e.split(".").pop(),n="ace/mode/";if(!t)return n+"text";switch(t){case"js":return n+"javascript";case"json":return n+"json"}}(t),i=d.default.require(o).Mode;e.session.setMode(new i)}e.session.setMode(r,function(){e.session.bgTokenizer.start(0)})},r.edit=function(t,n){void 0===n&&(n={});var r=null;if("string"==typeof t?r=document.getElementById(t)||document.querySelector(t):t&&(t.id||t.tagName)&&(r=t),!r)return console.error("Invalid container reference: "+r),null;if("object"!=typeof n)return console.error("Invalid options parameter : "+n),null;var o=null,i=new e.EditSession(n.text?n.text:"");return i.language=n.language?n.language:this.language,i.setUndoManager(new e.UndoManager),(o=d.default.edit(r,Object.assign({fontSize:n.fontSize||this.fontSize,fontFamily:n.fontName||this.fontName,theme:n.theme||this.theme,showLineNumbers:!0,readOnly:!1,showGutter:!0,animatedScroll:!0,minLines:5,maxLines:"auto",selectionStyle:"row",highlightActiveLine:!0,showPrintMargin:!0},n))).data=n.data||{},o.setSession(i),o.renderer.setScrollMargin(10,10,10,10),o.$blockScrolling=Infinity,o.setOptions({scrollPastEnd:.9,autoScrollEditorIntoView:!0}),o.focus(),this.setHighlightRule(o,n.fileName),this.editors.push(o),this.editor=o,setTimeout(function(){o.clearSelection()},0),o},r.reset=function(){this.FontSize=this.defaults.fontSize,this.FontName=this.defaults.fontName,this.Theme=this.defaults.theme},r.destroy=function(){this.editors.forEach(function(e){e.destroy(),e.container.remove()})},(n=[{key:"Text",get:function(){var e;return(null==(e=this.editor)?void 0:e.getValue())||""},set:function(e){var t;return null==(t=this.editor)?void 0:t.setValue(e)}},{key:"ThemeList",get:function(){return w}},{key:"Theme",get:function(){return this.theme},set:function(e){var t=this;if(e){var n=e&&e.toLowerCase();(this.Themes.dark.find(function(e){return e.toLowerCase()===n.toLocaleLowerCase()})||this.Themes.light.find(function(e){return e.toLowerCase()===n.toLocaleLowerCase()}))&&(this.theme="ace/theme/"+n.replace(/\s+/g,"_"),this.editors.forEach(function(e){return e.setTheme(t.theme)}))}else console.log("Theme not set")}},{key:"FontName",get:function(){return this.fontName},set:function(e){this.fontName=e}},{key:"FontSize",get:function(){return this.fontSize},set:function(e){this.fontSize=e}},{key:"Editors",get:function(){return this.editors}},{key:"Editor",get:function(){return this.editor},set:function(e){this.editor=e}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),t}())});
//# sourceMappingURL=rules-editor.umd.js.map
