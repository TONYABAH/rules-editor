{"version":3,"file":"rules-editor.umd.js","sources":["../src/ace-wrapper.js","../src/engine-wrapper.js","../src/default_highlight_rules.js","../src/default_fold.js","../src/debounce.js","../src/default_mode.js","../src/resource_highlight_rules.js","../src/resource_fold.js","../src/resource_mode.js","../src/dynamic-mode.js","../src/code-editor.js","../index.js"],"sourcesContent":["// import ace from \"ace-builds\";\r\nconst ace = window.ace\r\n// import { Range, EditSession, UndoManager } from \"ace-builds\";\r\nconst { Range, EditSession, UndoManager } = ace\r\n/*import \"ace-builds/src-noconflict/theme-cobalt.js\";\r\nimport \"ace-builds/src-noconflict/theme-merbivore_soft.js\";\r\nimport \"ace-builds/src-noconflict/theme-monokai.js\";\r\nimport \"ace-builds/src-noconflict/theme-tomorrow_night_blue.js\";\r\nimport \"ace-builds/src-noconflict/theme-twilight.js\";\r\nimport \"ace-builds/src-noconflict/theme-solarized_light.js\";\r\nimport \"ace-builds/src-noconflict/theme-ambiance.js\";\r\nimport \"ace-builds/src-noconflict/theme-chrome.js\";\r\nimport \"ace-builds/src-noconflict/theme-textmate.js\";\r\nimport \"ace-builds/webpack-resolver\";\r\nconst path = \"ace-builds/src-noconflict/\";\r\nace.config.set(\"basePath\", path);*/\r\nconst TextHighlightRules = ace.require(\r\n    \"ace/mode/text_highlight_rules\"\r\n).TextHighlightRules;\r\n\r\nconst TextMode = ace.require(\"ace/mode/text\").Mode;\r\nconst BaseFoldMode = ace.require(\"ace/mode/folding/fold_mode\").FoldMode;\r\nconst TokenIterator = ace.require(\"ace/token_iterator\").TokenIterator;\r\n// console.log(TextMode);\r\n// const JSONMode = ace.require(\"ace/mode/json\").Mode;\r\nconst Themes = {\r\n    light: [\"Solarized Light\", \"Ambience\", \"Chrome\", \"Textmate\"],\r\n    dark: [\r\n        \"Cobalt\",\r\n        \"Merbivore Soft\",\r\n        \"Monokai\",\r\n        \"Tomorrow night blue\",\r\n        \"Twilight\",\r\n    ],\r\n    // default: ace.require('ace/theme/ambiance'),\r\n};\r\n\r\n// import modes that you want to include into your main bundle\r\n// import 'ace-builds/src-noconflict/mode-javascript'\r\n// import webpack resolver to dynamically load modes, you need to install file-loader for this to work!\r\n// import 'ace-builds/webpack-resolver'\r\n\r\n// if you want to allow dynamic loading of only a few modules use setModuleUrl for each of them manually\r\n// import jsWorkerUrl from 'file-loader!../../build/src-noconflict/worker-javascript';\r\n// ace.config.setModuleUrl('ace/mode/javascript_worker', jsWorkerUrl)\r\n\r\n// import {Mode as JSMode} from '../../build/src-noconflict/mode-javascript'\r\n// editor.setMode( new JSMode())\r\n\r\n// const EditSession = ace.EsitSession //ace.require('ace/edit_session').EditSession\r\n// const UndoManager = ace.UndoManager //ace.require('ace/undomanager').UndoManager\r\n// const BaseFoldMode = ace.require('ace/mode/folding/fold_mode').FoldMode\r\n// const TokenIterator = ace.require('ace/token_iterator').TokenIterator\r\n\r\n// const TextMode = require('ace-builds/src-noconflict/mode-text').Mode\r\n// import * as TextNode from 'ace-builds/src-noconflict/mode-text'\r\n\r\nexport {\r\n    ace,\r\n    Range,\r\n    EditSession,\r\n    UndoManager,\r\n    BaseFoldMode,\r\n    TokenIterator,\r\n    TextHighlightRules,\r\n    TextMode,\r\n    // JSONMode,\r\n    Themes,\r\n};\r\n","// import { ResParser, Parser, Keywords } from 'rules-engine'\r\nimport { Rules } from \"rules-engine/src/Rules\";\r\n\r\nRules.init([\"fr\", \"de\"]);\r\n\r\nexport default Rules;\r\n","/* jslint esversion:8 */\r\nimport * as wrapper from \"./ace-wrapper\";\r\nimport Rules from \"./engine-wrapper\";\r\nconst TextHighlightRules = wrapper.TextHighlightRules;\r\n// var rules = null;\r\nconst mode = \"ace/mode/kbf\";\r\n\r\nclass HighlightRules extends TextHighlightRules {\r\n    constructor(language) {\r\n        super();\r\n        this.keywords = {};\r\n        this.rules = new Rules(language, mode);\r\n        this.setLanguage(language);\r\n    }\r\n    getRules() {\r\n        return {\r\n            start: [\r\n                {\r\n                    token: \"comment\",\r\n                    regex: /\\/\\/.*$/,\r\n                },\r\n                {\r\n                    token: \"comment\", // multi line comment\r\n                    regex: /\\/\\*/,\r\n                    next: \"comment\",\r\n                },\r\n                {\r\n                    token: \"string\", // character\r\n                    regex: /'(?:.|\\\\(:?u[\\da-fA-F]+|x[\\da-fA-F]+|[tbrf'\"n]))?'/,\r\n                },\r\n                { token: \"string\", regex: \"`\", next: \"string\" },\r\n                { token: \"string\", regex: \"'\", next: \"qstring\" },\r\n                {\r\n                    token: \"constant.numeric\", // hex\r\n                    regex: \"0[xX][0-9a-fA-F]+\\\\b\",\r\n                },\r\n                {\r\n                    token: \"constant.numeric\", // float\r\n                    regex: /[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b/,\r\n                },\r\n                {\r\n                    token: \"punctuation.operator\",\r\n                    regex: /\\?|\\:|\\,|\\;|\\./,\r\n                },\r\n                {\r\n                    token: \"paren.lparen\",\r\n                    regex: \"[[({]\",\r\n                },\r\n                {\r\n                    token: \"paren.rparen\",\r\n                    regex: \"[\\\\])}]\",\r\n                },\r\n                {\r\n                    token: \"text\",\r\n                    regex: /\\s+/,\r\n                },\r\n                {\r\n                    token: \"keyword.operator\",\r\n                    regex: /[-+%=<>*]|[~:,.&!^]/,\r\n                },\r\n                {\r\n                    token: \"keyword.operator\",\r\n                    regex: \"abs sign ceil floor trunc frac acos asin atan cos sin tan cosh sinh tanh exp log log10 sqrt pi\"\r\n                        .split(\" \")\r\n                        .join(\"|\"),\r\n                },\r\n                {\r\n                    token: (value) => {\r\n                        const found = this.keywordEntries.find((entry) => {\r\n                            return (\r\n                                entry[1].toLowerCase() === value.toLowerCase()\r\n                            );\r\n                        });\r\n                        if (found) {\r\n                            switch (found[0]) {\r\n                                case \"TRUE\":\r\n                                case \"FALSE\":\r\n                                case \"YES\":\r\n                                case \"NO\":\r\n                                    return \"constant.language.boolean\";\r\n                                case \"OR\":\r\n                                case \"AND\":\r\n                                case \"IF\":\r\n                                case \"ELSE\":\r\n                                case \"ELSEIF\":\r\n                                case \"THEN\":\r\n                                    return \"keyword.control\";\r\n                                case \"DIGIT\":\r\n                                case \"TEXT\":\r\n                                case \"MENU\":\r\n                                case \"NUMBER\":\r\n                                    return \"constant.language\";\r\n                                default:\r\n                                    return \"keyword.other\";\r\n                            }\r\n                        } else {\r\n                            return \"text\";\r\n                        }\r\n                    },\r\n                    regex: new RegExp(/\\b\\w+\\b/),\r\n                },\r\n                {\r\n                    caseInsensitive: true,\r\n                },\r\n                // this.keywordRule\r\n            ],\r\n            qstring: [\r\n                { token: \"constant.language.escape\", regex: /''/ },\r\n                { token: \"string\", regex: \"'\", next: \"start\" },\r\n                { defaultToken: \"string\" },\r\n            ],\r\n            string: [\r\n                { token: \"constant.language.escape\", regex: /``/ },\r\n                { token: \"string\", regex: \"`\", next: \"start\" },\r\n                { defaultToken: \"string\" },\r\n            ],\r\n            comment: [\r\n                {\r\n                    token: \"comment\", // closing comment\r\n                    regex: \"\\\\*\\\\/\",\r\n                    next: \"start\",\r\n                },\r\n                {\r\n                    defaultToken: \"comment\",\r\n                },\r\n            ],\r\n        };\r\n    }\r\n    // Set language definition dynamically at run time\r\n    setLanguage(language) {\r\n        this.keywords = this.rules.getKeywords();\r\n        if (!this.keywords) {\r\n            throw new Error(\"Language not supported yet: \" + language || \"\");\r\n        }\r\n        this.keywordEntries = Object.entries(this.keywords);\r\n        this.$rules = this.getRules();\r\n        this.normalizeRules();\r\n        // this.embedRules(DocCommentHighlightRules, \"doc-\", [ DocCommentHighlightRules.getEndRule(\"start\") ]);\r\n    }\r\n}\r\n\r\nexport default HighlightRules;\r\n","/* jslint esversion:6 */\r\nimport * as wrapper from './ace-wrapper'\r\nconst {\r\n  Range,\r\n  BaseFoldMode,\r\n  TokenIterator,\r\n} = wrapper\r\n// ace.config.set('basePath', '../node_mdules/ace-builds/src-noconflict')\r\n// ace.config.set('basePath', '../lib/ace-builds/src-noconflict')\r\n// require('ace-builds/webpack-resolver')\r\n// const Range = ace.Range\r\n// const BaseFoldMode = ace.require('ace/mode/folding/fold_mode').FoldMode\r\n// const TokenIterator = ace.require('ace/token_iterator').TokenIterator\r\nconst fold = {\r\n  en: {\r\n    foldingStartMarker: /\\b^\\s*(?:rule|prompt|summary)\\b/i,\r\n    foldingStopMarker: /\\b^\\s*(?:prompt|rule|max|min|text|digit|yes\\/no)\\b/ig,\r\n    foldingStopMenu: /\\b^\\s*(?:max|min|text|digit|yes\\/no)\\b/ig,\r\n  },\r\n  fr: {\r\n    foldingStartMarker: /\\b^\\s*(?:rule|prompt|summary)\\b/i,\r\n    foldingStopMarker: /\\b^\\s*(?:prompt|rule|max|min|text|digit|yes\\/no)\\b/ig,\r\n    foldingStopMenu: /\\b^\\s*(?:max|min|text|digit|yes\\/no)\\b/ig,\r\n  },\r\n}\r\n\r\nexport default class extends BaseFoldMode {\r\n  constructor () {\r\n    super()\r\n    // regular expressions that identify starting and stopping points\r\n    this.foldingStartMarker = fold.en.foldingStartMarker\r\n    this.foldingStopMarker = fold.en.foldingStopMarker\r\n    this.foldingStopMenu = fold.en.foldingStopMenu\r\n\r\n    this.getFoldWidgetRange = (session, _foldStyle, row) => {\r\n      const lang = session.language\r\n      var line = session.getLine(row)\r\n      switch (lang) {\r\n      default:\r\n        this.foldingStartMarker = fold[lang].foldingStartMarker // /\\b^\\s*(?:rule|prompt|summary|if|then|else)\\b/;\r\n        this.foldingStopMarker = fold[lang].foldingStopMarker /// \\b^\\s*(?:rule|prompt)\\b/;\r\n        this.foldingStopMenu = fold[lang].foldingStopMenu\r\n      }\r\n      var matchStart = line.match(this.foldingStartMarker)\r\n      if (matchStart) {\r\n        // var i = matchStart.index;\r\n        // if (match[0]) {\r\n        var position = { row: row, column: line.length }\r\n        var iterator = new TokenIterator(session, position.row, position.column)\r\n        var token = iterator.getCurrentToken()\r\n        var seek = this.foldingStopMarker\r\n\r\n        while (token) {\r\n          if (token.value.match(seek)) {\r\n            const currentRow = iterator.getCurrentTokenRow()\r\n            return Range.fromPoints(position, {\r\n              row: token.value.match(this.foldingStopMenu) ? currentRow : currentRow - 1,\r\n              column: iterator.getCurrentTokenColumn(),\r\n            })\r\n          }\r\n          token = iterator.stepForward()\r\n        }\r\n        // }\r\n      }\r\n      // test each line, and return a range of segments to collapse\r\n      return null\r\n    }\r\n  }\r\n}\r\n","function debounce (func, wait, immediate) {\r\n  var timeout\r\n  return function () {\r\n    var context = this; var args = arguments\r\n    var later = function () {\r\n      timeout = null\r\n      if (!immediate) func.apply(context, args)\r\n    }\r\n    var callNow = immediate && !timeout\r\n    clearTimeout(timeout)\r\n    timeout = setTimeout(later, wait)\r\n    if (callNow) func.apply(context, args)\r\n  }\r\n}\r\n\r\nexport default debounce\r\n\r\n/* Usage\r\nvar myEfficientFn = debounce(function() {\r\n\t// All the taxing stuff you do\r\n}, 250);\r\n\r\nwindow.addEventListener('resize', myEfficientFn);\r\n*/\n","/* jslint esversion:8 */\r\nimport { TextMode } from \"./ace-wrapper\";\r\n\r\nimport Rules from \"./engine-wrapper\";\r\nimport HighlightRules from \"./default_highlight_rules\";\r\nimport DefaultFoldMode from \"./default_fold\";\r\nimport debounce from \"./debounce\";\r\n// const ace = require('ace-builds/src-noconflict/ace')\r\n// ace.config.set('basePath', '../node_mdules/ace-builds/src-noconflict')\r\n// const TextMode = ace.require('ace/mode/text').Mode\r\n\r\nexport default class extends TextMode {\r\n    constructor(editor, watch = true) {\r\n        super();\r\n        this.lineCommentStart = \"//\";\r\n        this.blockComment = { start: \"/*\", end: \"*/\" };\r\n        this.editor = editor;\r\n        this.language = editor.session.language;\r\n        this.$highlightRules = new HighlightRules(this.language);\r\n        // If static highlighter, do not watch for changes\r\n        this.$id = \"ace/mode/kbf\";\r\n        this.rules = new Rules(this.editor.session.language || \"en\", this.$id);\r\n        if (watch) this.watch();\r\n    }\r\n\r\n    watch() {\r\n        this.foldingRules = new DefaultFoldMode();\r\n        this.editor.on(\r\n            \"change\",\r\n            debounce(async () => {\r\n                const value = this.editor.getValue();\r\n                try {\r\n                    const errors = await this.rules.parse(value);\r\n                    this.editor.session.clearAnnotations();\r\n                    this.editor.session.setAnnotations(errors);\r\n                } catch (e) {\r\n                    // this.editor.session.setAnnotations(errors)\r\n                    console.log(e);\r\n                }\r\n            }, 1000)\r\n        );\r\n    }\r\n}\r\n","/* jslint esversion:8 */\r\nimport * as wrapper from \"./ace-wrapper\";\r\nconst { TextHighlightRules } = wrapper;\r\n// const TextHighlightRules = ace.require('ace/mode/text_highlight_rules').TextHighlightRules\r\n\r\nclass HighlightRules extends TextHighlightRules {\r\n    constructor() {\r\n        super();\r\n        this.$rules = {\r\n            start: [\r\n                {\r\n                    token: \"comment\",\r\n                    regex: /\\/\\/.*$/,\r\n                },\r\n                {\r\n                    token: \"comment\", // multi line comment\r\n                    regex: /\\/\\*/,\r\n                    next: \"comment\",\r\n                },\r\n                { token: \"string\", regex: \"`\", next: \"string\" },\r\n                { token: \"string\", regex: \"'\", next: \"qstring\" },\r\n                {\r\n                    token: \"constant.numeric\", // hex\r\n                    regex: /0[xX][0-9a-fA-F]+\\b/,\r\n                },\r\n                {\r\n                    token: \"constant.numeric\", // float\r\n                    regex: /[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b/,\r\n                },\r\n                {\r\n                    token: \"keyword.operator\",\r\n                    regex: /\\W[-+%=<>*]\\W|\\*\\*|[~:,.&$]|->*?|=>/,\r\n                },\r\n                {\r\n                    token: \"paren.lparen\",\r\n                    regex: /[\\[(\\{]/,\r\n                },\r\n                {\r\n                    token: \"paren.rparen\",\r\n                    regex: /[\\])\\}]/,\r\n                },\r\n\r\n                {\r\n                    token: \"keyword\",\r\n                    regex: /[^=]+(?:[=:])/,\r\n                },\r\n                {\r\n                    token: \"punctuation.operator\",\r\n                    regex: /\\?[:,;=\\.]/,\r\n                },\r\n                {\r\n                    caseInsensitive: true,\r\n                },\r\n            ],\r\n            qstring: [\r\n                { token: \"constant.language.escape\", regex: /''/ },\r\n                { token: \"string\", regex: \"'\", next: \"start\" },\r\n                { defaultToken: \"string\" },\r\n            ],\r\n            string: [\r\n                { token: \"constant.language.escape\", regex: /``/ },\r\n                { token: \"string\", regex: \"`\", next: \"start\" },\r\n                { defaultToken: \"string\" },\r\n            ],\r\n            comment: [\r\n                {\r\n                    token: \"comment\", // closing comment\r\n                    regex: /\\*\\//,\r\n                    next: \"start\",\r\n                },\r\n                {\r\n                    defaultToken: \"comment\",\r\n                },\r\n            ],\r\n        };\r\n    }\r\n}\r\n// \"variable.language\": \"this\",\r\n// \"constant.language\": \"TRUE FALSE NULL SPACE\",\r\nexport default new HighlightRules();\r\n","/* jslint esversion:6 */\r\nimport * as wrapper from './ace-wrapper'\r\nconst {\r\n  Range,\r\n  BaseFoldMode,\r\n  TokenIterator,\r\n} = wrapper\r\n\r\n// const Range = ace.Range\r\n// const BaseFoldMode = ace.require('ace/mode/folding/fold_mode').FoldMode\r\n// const TokenIterator = ace.require('ace/token_iterator').TokenIterator\r\n\r\nexport default class extends BaseFoldMode {\r\n  constructor () {\r\n    super()\r\n    // regular expressions that identify starting and stopping points\r\n    this.foldingStartMarker = /^\\s*\\/\\/[^-]+$/\r\n    this.foldingStopMarker = /^\\s*--/\r\n\r\n    this.getFoldWidgetRange = (session, _foldStyle, row) => {\r\n      var line = session.getLine(row)\r\n      var matchStart = line.match(this.foldingStartMarker)\r\n      if (matchStart) {\r\n        var position = { row: row, column: line.length }\r\n        var iterator = new TokenIterator(session, position.row, position.column)\r\n        var token = iterator.getCurrentToken()\r\n        var seek = this.foldingStopMarker\r\n\r\n        while (token) {\r\n          if (token.value.match(seek)) {\r\n            const currentRow = iterator.getCurrentTokenRow()\r\n            return Range.fromPoints(position, {\r\n              row: currentRow,\r\n              column: iterator.getCurrentTokenColumn(),\r\n            })\r\n          }\r\n          token = iterator.stepForward()\r\n        }\r\n        // }\r\n      }\r\n      // test each line, and return a range of segments to collapse\r\n      return null\r\n    }\r\n  }\r\n}\r\n","import { TextMode } from \"./ace-wrapper\";\r\n// import { ResParser as Parser } from './engine-wrapper'\r\n// import { rules as Rule } from './engine-wrapper'\r\nimport Rules from \"./engine-wrapper\";\r\nimport debounce from \"./debounce\";\r\nimport HighlightRules from \"./resource_highlight_rules\";\r\nimport DefaultFoldMode from \"./resource_fold\";\r\n// const ace = require('ace-builds/src-noconflict/ace')\r\n// const TextMode = ace.require('ace/mode/text').Mode\r\nexport default class extends TextMode {\r\n    constructor(editor, onlyHighlight = false) {\r\n        super();\r\n        this.$highlightRules = this.HighlightRules = HighlightRules;\r\n        this.foldingRules = new DefaultFoldMode();\r\n        this.editor = editor;\r\n        this.language = editor.session.language;\r\n        this.$id = \"ace/mode/res\";\r\n        this.rules = new Rules(this.editor.session.language || \"en\", this.$id);\r\n        // If static highlighter, do not watch for changes\r\n        if (!onlyHighlight) this.watch();\r\n    }\r\n\r\n    watch() {\r\n        // this.parser = new Parser(this.editor.session.language || 'en')\r\n        // this.parser.on('done', (errors) => {\r\n        // this.editor.session.setAnnotations(errors)\r\n        // })\r\n        this.editor.on(\r\n            \"change\",\r\n            debounce(async () => {\r\n                const value = this.editor.getValue();\r\n                try {\r\n                    const errors = await this.rules.parse(value);\r\n                    this.editor.session.clearAnnotations();\r\n                    this.editor.session.setAnnotations(errors);\r\n                } catch (e) {\r\n                    // this.editor.session.setAnnotations(errors)\r\n                    console.log(e);\r\n                }\r\n            }, 1000)\r\n        );\r\n    }\r\n}\r\n","function autoImplementedMode (filename) {\r\n  var ext = filename.split('.').pop()\r\n  var prefix = \"ace/mode/\"\r\n\r\n  if (!ext) {\r\n    return prefix + \"text\"\r\n  }\r\n\r\n  /**\r\n   *  Functional, but inefficient if you want to write it by yourself ....\r\n   */\r\n  switch (ext) {\r\n    case \"js\":\r\n      return prefix + \"javascript\"\r\n    case \"json\":\r\n      return prefix + \"json\"\r\n    default: 'text'\r\n  }\r\n}\r\n\r\n\r\n// var filename = \"myfile.js\"\r\n// In this case \"ace/mode/javascript\"\r\n// var mode = autoImplementedMode(filename)\r\n// editor.getSession().setMode(mode)\r\nexport default autoImplementedMode\r\n","import { ace, EditSession, UndoManager, Themes } from \"./ace-wrapper\";\r\n\r\nimport Mode from \"./default_mode\";\r\nimport ResourceMode from \"./resource_mode\";\r\nimport dynamicMode from \"./dynamic-mode\";\r\n\r\nclass CodeEditor {\r\n    constructor() {\r\n        if (!CodeEditor.instance) {\r\n            CodeEditor.instance = this;\r\n        }\r\n        this.language = \"en\";\r\n        this.editors = [];\r\n        this.defaults = {\r\n            fontSize: 18,\r\n            fontName: \"Courier New\",\r\n            theme: \"ace/theme/tomorrow_night_blue\",\r\n        };\r\n        this.theme = this.defaults.theme; // 'ace/theme/tomorrow_night_blue'\r\n        this.fontSize = this.defaults.fontSize;\r\n        this.fontName = this.defaults.fontName;\r\n\r\n        return CodeEditor.instance;\r\n    }\r\n\r\n    setHighlightRule(editor, fileName) {\r\n        // return this.setHighlightRules(editor, mode)\r\n        const ext = fileName\r\n            ? fileName.substring(fileName.indexOf(\".\"))\r\n            : \".kbf\";\r\n        let defaultMode = null;\r\n        if (ext === \".kbf\") {\r\n            defaultMode = new Mode(editor);\r\n        } else if (ext === \".res\") {\r\n            defaultMode = new ResourceMode(editor);\r\n        } else {\r\n            const modePath = dynamicMode(fileName);\r\n            const DynamicMode = ace.require(modePath).Mode;\r\n            editor.session.setMode(new DynamicMode());\r\n        }\r\n\r\n        editor.session.setMode(defaultMode, () => {\r\n            editor.session.bgTokenizer.start(0);\r\n        });\r\n    }\r\n\r\n    edit(element, options = {}) {\r\n        let el = null;\r\n        if (typeof element === \"string\") {\r\n            el =\r\n                document.getElementById(element) ||\r\n                document.querySelector(element);\r\n        } else if (element && (element.id || element.tagName)) {\r\n            el = element;\r\n        }\r\n        if (!el) {\r\n            console.error(\"Invalid container reference: \" + el);\r\n            return null;\r\n        }\r\n        if (typeof options !== \"object\") {\r\n            console.error(\"Invalid options parameter : \" + options);\r\n            return null;\r\n        }\r\n\r\n        let editor = null;\r\n        const session = new EditSession(options.text ? options.text : \"\");\r\n        session.language = options.language ? options.language : this.language;\r\n        session.setUndoManager(new UndoManager());\r\n\r\n        const editorSettings = {\r\n            fontSize: options.fontSize || this.fontSize,\r\n            fontFamily: options.fontName || this.fontName,\r\n            theme: options.theme || this.theme,\r\n            showLineNumbers: true,\r\n            readOnly: false,\r\n            showGutter: true,\r\n            animatedScroll: true,\r\n            minLines: 5,\r\n            maxLines: 'auto',\r\n            selectionStyle: \"row\",\r\n            highlightActiveLine: true,\r\n            showPrintMargin: true,\r\n        };\r\n\r\n        editor = ace.edit(el, Object.assign(editorSettings, options));\r\n        editor.data = options.data || {};\r\n        editor.setSession(session);\r\n        editor.renderer.setScrollMargin(10, 10, 10, 10);\r\n        editor.$blockScrolling = Infinity;\r\n        editor.setOptions({\r\n            scrollPastEnd: 0.9,\r\n            autoScrollEditorIntoView: true,\r\n        });\r\n        editor.focus();\r\n        // editor.select()\r\n        // editor.gotoLine(0)\r\n        // editor.blur(true)\r\n        // this.editor.session.selection.on('changeSelection', function(){});\r\n        // this.editor.session.selection.on('changeCursor', function(){});\r\n        this.setHighlightRule(editor, options.fileName);\r\n        this.editors.push(editor);\r\n        setTimeout(() => {\r\n            // let sel = editor.selection\r\n            // sel.clearSelection()\r\n            editor.clearSelection();\r\n        }, 0);\r\n\r\n        return editor;\r\n    }\r\n\r\n    reset() {\r\n        this.FontSize = this.defaults.fontSize;\r\n        this.FontName = this.defaults.fontName;\r\n        this.Theme = this.defaults.theme;\r\n    }\r\n    destroy() {\r\n        this.editors.forEach((editor) => {\r\n            editor.destroy();\r\n            editor.container.remove();\r\n        });\r\n    }\r\n    get ThemeList() {\r\n        return Themes;\r\n    }\r\n    set Theme(val) {\r\n        if (!val) {\r\n            console.log(\"Theme not set\");\r\n            return;\r\n        }\r\n        let theme = val && val.toLowerCase();\r\n        if (\r\n            this.Themes.dark.find(\r\n                (item) => item.toLowerCase() === theme.toLocaleLowerCase()\r\n            ) ||\r\n            this.Themes.light.find(\r\n                (item) => item.toLowerCase() === theme.toLocaleLowerCase()\r\n            )\r\n        ) {\r\n            this.theme = \"ace/theme/\" + theme.replace(/\\s+/g, \"_\");\r\n            this.editors.forEach((editor) => editor.setTheme(this.theme));\r\n        }\r\n    }\r\n    get Theme() {\r\n        return this.theme;\r\n    }\r\n    get FontName() {\r\n        return this.fontName;\r\n    }\r\n    set FontName(value) {\r\n        this.fontName = value;\r\n    }\r\n    get FontSize() {\r\n        return this.fontSize;\r\n    }\r\n    set FontSize(value) {\r\n        this.fontSize = value;\r\n    }\r\n    get Editors() {\r\n        return this.editors;\r\n    }\r\n}\r\nconst instance = new CodeEditor();\r\nObject.freeze(instance);\r\n\r\n/*  setHighlightRules (editor, language) {\r\n    const lang = language || 'text'\r\n    const session = editor.session\r\n    editor.session.setMode('ace/mode/' + lang, function () {\r\n    const rules = session.$mode.$highlightRules.getRules()\r\n      for (let stateName in rules) {\r\n        if (Object.prototype.hasOwnProperty.call(rules, stateName)) {\r\n          rules[stateName].unshift({\r\n            token: 'keyword',\r\n            regex: /TITLE/,\r\n          }, {\r\n            token: 'constant',\r\n            regex: /GOAL/,\r\n          })\r\n        }\r\n      }\r\n      // console.log(session.$mode)\r\n      // force recreation of tokenizer\r\n      session.$mode.$tokenizer = null\r\n      session.bgTokenizer.setTokenizer(session.$mode.getTokenizer())\r\n      // force re-highlight whole document\r\n      session.bgTokenizer.start(0)\r\n    })\r\n  } */\r\nexport default instance;\r\n","/* eslint-disable */\r\nimport AceEditor from './src'\r\nexport default AceEditor\r\n"],"names":["ace","window","Range","EditSession","UndoManager","TextHighlightRules","require","TextMode","Mode","BaseFoldMode","FoldMode","TokenIterator","Themes","light","dark","Rules","init","wrapper","mode","HighlightRules","language","keywords","rules","setLanguage","getRules","start","token","regex","next","split","join","value","found","keywordEntries","find","entry","toLowerCase","RegExp","caseInsensitive","qstring","defaultToken","string","comment","getKeywords","Error","Object","entries","$rules","normalizeRules","fold","en","foldingStartMarker","foldingStopMarker","foldingStopMenu","fr","getFoldWidgetRange","session","_foldStyle","row","lang","line","getLine","matchStart","match","position","column","length","iterator","getCurrentToken","seek","currentRow","getCurrentTokenRow","fromPoints","getCurrentTokenColumn","stepForward","debounce","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","_catch","body","recover","result","e","then","editor","watch","lineCommentStart","blockComment","end","$highlightRules","$id","foldingRules","DefaultFoldMode","on","getValue","parse","errors","clearAnnotations","setAnnotations","console","log","onlyHighlight","autoImplementedMode","filename","ext","pop","prefix","CodeEditor","instance","editors","defaults","fontSize","fontName","theme","setHighlightRule","fileName","substring","indexOf","defaultMode","ResourceMode","modePath","dynamicMode","DynamicMode","setMode","bgTokenizer","edit","element","options","el","document","getElementById","querySelector","id","tagName","error","text","setUndoManager","editorSettings","fontFamily","showLineNumbers","readOnly","showGutter","animatedScroll","minLines","maxLines","selectionStyle","highlightActiveLine","showPrintMargin","assign","data","setSession","renderer","setScrollMargin","$blockScrolling","Infinity","setOptions","scrollPastEnd","autoScrollEditorIntoView","focus","push","clearSelection","reset","FontSize","FontName","Theme","destroy","forEach","container","remove","val","item","toLocaleLowerCase","replace","setTheme","freeze"],"mappings":"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"}